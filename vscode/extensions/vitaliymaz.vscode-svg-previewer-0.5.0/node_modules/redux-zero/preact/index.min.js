!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("preact")):"function"==typeof define&&define.amd?define(["exports","preact"],n):n(t["redux-zero"]={},t.preact)}(this,function(t,n){"use strict";function e(t,n){function e(){this.constructor=t}p(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}function o(t,n){for(var e in t)if(t[e]!==n[e])return!1;for(var e in n)if(!(e in t))return!1;return!0}function r(t,n){if(null!=n){if(n.then)return n.then(t.setState);t.setState(n)}}function i(t,n,e){t="function"==typeof t?t(n,e):t;var o={};for(var i in t)!function(e){o[e]=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var p=t[e];return"function"==typeof n.middleware?n.middleware(n,p,o):r(n,p.apply(void 0,[n.getState()].concat(o)))}}(i);return o}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])},u=Object.assign||function(t){for(var n,e=1,o=arguments.length;e<o;e++){n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.state=n.getProps(),n.actions=n.getActions(),n.update=function(){var t=n.getProps();o(t,n.state)||n.setState(t)},n}return e(n,t),n.prototype.componentWillMount=function(){this.unsubscribe=this.context.store.subscribe(this.update)},n.prototype.componentWillUnmount=function(){this.unsubscribe(this.update)},n.prototype.getProps=function(){var t=this.props.mapToProps,n=this.context.store&&this.context.store.getState()||{};return t?t(n,this.props):n},n.prototype.getActions=function(){return i(this.props.actions,this.context.store,this.props)},n.prototype.render=function(t,n,e){var o=t.children,r=e.store;return o[0](u({store:r},n,this.actions))},n}(n.Component),c=s,f=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.getChildContext=function(){return{store:this.props.store}},n.prototype.render=function(){return this.props.children[0]},n}(n.Component);t.connect=function(t,o){return void 0===o&&(o={}),function(r){return function(i){function p(){return null!==i&&i.apply(this,arguments)||this}return e(p,i),p.prototype.render=function(){var e=this.props;return n.h(c,u({},e,{mapToProps:t,actions:o}),function(t){return n.h(r,u({},t,e))})},p}(n.Component)}},t.Provider=f,t.Connect=s,Object.defineProperty(t,"__esModule",{value:!0})});
